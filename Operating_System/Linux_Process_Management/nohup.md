# 🚀 학습 키워드

## 정의

`nohup (No Hang Up)` : **쉘 세션이 종료되어도 프로세스가 계속 실행되도록 하는 리눅스/유닉스 명령어**

- HUP 신호를 무시하도록 만드는 POSIX 명령어
- HUP 신호는 전통적으로 터미널이 의존 프로세스들에게 로그아웃을 알리는 방식
- 일반적으로 터미널로 향하는 출력은 별도로 넘겨주기 처리를 하지 않았을 경우 nohup.out 이라는 파일로 출려됨

## 키워드

일반적으로 사용자가 SSH로 서버에 접속하여 실행한 프로세스는 세션이 종료되면 함께 종료되지만, nohup을 사용하면 백그라운드에서 계속 실행되도록 만들 수 있다.

---

# 📝 nohup (No Hang Up)

## 사용법

- **해당 부분은 .py파일 실행을 기준으로 작성 (.ipynb -> .py 변환 코드는 아래 참고)**

1-(a). 기본 실행 : `nohup python [파일명].py &`

- **위 명령어를 실행하면 파이썬 파일이 백드라운드에서 실행되며, 사용자가 로그아웃해도 계속 실행**
- `&` : 백그라운드로 실행

1-(b). 실행 결과 로그 파일 지정하여 실행 : `nohup python [파일명].py > [로그파일명].log 2>&1 &`

- **기본적으로 nohup은 표준 출력을 nohup.out 파일로 저장 / 로그파일명 변경 가능**
- `> output.log` : 표준 출력을 output.log 파일로 저장
- `2>&1` : 표준 에러 출력도 같은 파일 (output.log)로 저장

2. 1-(b) 실행 후 로그 확인 : `tail -f [로그파일명].log`
   - **실행된 프로그램의 로그를 실시간으로 확인**
   - `tail` : 파일의 마지막 부분을 출력
   - `-f` : 파일의 내용을 실시간으로 감시
3. nohup 실행 후 프로세스 확인 및 종료 : `ps aux | grep [파일명].py` or `pgrep -f [파일명].py`
   - `ps aux` : 현재 실행 중인 프로세스 목록 확인
   - `grep` : 특정 프로세스명을 찾기
   - `kill -9 <PID>` : 특정 프로세스 종료

## nohup과 &의 차이점

- 단순히 `&`만 사용하면 프로세스가 백그라운드에서 실행되지만, 터미널 세션이 종료되면 프로세스도 종료
  - `python train.py &`
- `nohup`을 사용하면 터미널 세션이 종료되어도 프로세스가 계속 실행
  - `nohup python train.py &`

## nohup을 사용해야하는 경우

- SSH 세션이 종료되어도 계속 실행해야 하는 경우
- 장시간 실행되는 스크립트를 백드라운드에서 실행하는 경우
- 서버 유지보수를 위해 로그를 저장하면서 실행해야 하는 경우

---

# ✨ 추가

- ipynb 파일을 py 파일로 변환하는 방법

  - `jupyter nbconvert --to script [ipynb파일명]` : ipynb가 script형식으로 사용할 수 있는 .py 파일 형태가 된다.

- `사용법 1-(b) -> 2 -> 3 순서로 사용하는 것을 추천`

---

# 🔗레퍼런스

## 참고 강의/글

- [nohop(위키백과)](https://ko.wikipedia.org/wiki/Nohup)
