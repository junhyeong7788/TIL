# chapter 1

### 데이터 통신 소개

- **목적**: 다양한 매체를 통한 데이터 전송의 기본적인 측면을 소개합니다.
- **구성 요소**:
    - **단말 시스템**: 호스트와 사물인터넷(IoT) 장치를 포함하며 네트워크 애플리케이션을 실행합니다.
    - **통신 링크**: 광섬유, 구리선, 라디오, 위성 등 다양한 매체를 사용하며, 대역폭으로 정의되는 기능을 가집니다.
    - **라우터**: 데이터 패킷(데이터 조각)을 네트워크 간에 전달하는 장치입니다.

### 인터넷이란?

- **인터넷 기본 사항**:
    - 수백만 개의 컴퓨팅 장치가 네트워크로 연결되어 있습니다.
    - **프로토콜** 예를 들어 TCP, IP, HTTP, Skype, 이더넷은 메시지의 송수신을 제어합니다.
    - 인터넷은 조직적으로 계층화된 구조를 가지고 있으며, RFC(의견 요청)에 의해 설정된 표준에 의해 관리되며 IETF(인터넷 공학 태스크 포스)가 감독합니다.

### 인터넷 애플리케이션

- 웹 서비스, 소셜 네트워킹 사이트(SNS), 인터넷 전화(VoIP), 이메일, 게임, 전자 상거래, 파일 공유 등의 애플리케이션을 포함합니다.
- 이러한 애플리케이션은 "최선의 노력" 서비스(기본적으로 신뢰할 수 없는 서비스)로 알려져 있는 인터넷의 통신 서비스에 의존하여 소스에서 목적지까지 데이터를 전달합니다.

### 네트워크 엣지

- **구성 요소**:
    - **단말 시스템(호스트)**: 응용 프로그램을 실행; 클라이언트-서버 모델(예: 웹 브라우저/서버; 이메일 클라이언트/서버) 및 피어투피어 모델(예: Skype, BitTorrent)을 포함합니다.
    - **접근 네트워크**: 주거용, 기관용(예: 학교, 회사), 또는 모바일 네트워크일 수 있습니다.
    - **네트워크 코어**: 상호 연결된 라우터로 구성된 네트워크들의 네트워크입니다.

### 네트워크 코어

- **스위칭 방법**:
    - **회로 스위칭**: 호출당 전용 회로가 필요하며 전화 네트워크에서 흔히 볼 수 있는 호출 설정이 필요합니다.
    - **패킷 스위칭**: 데이터가 패킷이라고 불리는 이산적인 청크로 네트워크를 통해 전송됩니다. 이 방법에는 네트워크 리소스의 동적 공유를 포함하는 통계적 다중화 및 저장-전달과 같은 기술이 포함됩니다.

### 회로 대 패킷 스위칭

- **회로 스위칭**: 보장된 성능을 제공하지만 전용 회로가 지속적으로 사용되지 않는 경우 리소스를 낭비할 수 있습니다.
- **패킷 스위칭**: 돌발적인 데이터에 더 효율적이며, 호출 설정이 필요 없고, 네트워크 대역폭을 동적으로 공유하나, 혼잡이 발생할 수 있습니다.

### 인터넷 구조

- **구성**: 로컬 ISP부터 Tier1 ISP에 이르기까지 여러 수준의 인터넷 서비스 제공자(ISP)로 구성되며, 대략적으로 계층화된 구조를 형성합니다.

### 네트워크 성능: 손실, 지연, 처리량

- **손실 및 지연**: 주로 라우터의 버퍼 오버플로우 및 저장-전달 메커니즘에서 발생하며, 패킷 도착률이 출력 링크 용량을 초과할 때 발생합니다.
- **처리량**: 데이터가 성공적으로 전송되는 비율로 정의되며, 네트워크 혼잡 및 병목 링크의 대역폭과 같은 요소에 의해 영향을 받습니다.

### 프로토콜 계층 및 인터넷 프로토콜 스택

- 네트워크 아키텍처의 계층 모델을 설명하며 다음을 포함합니다:
    - **응용 계층**: 네트워크 응용 프로그램 지원(예: FTP, SMTP, HTTP).
    - **전송 계층**: 프로세스 간 데이터 전송(예: TCP, UDP).
    - **네트워크 계층**: 소스에서 목적지까지 데이터그램의 라우팅(예: IP).
    - **링크 계층**: 인접 네트워크 요소 간의 데이터 전송(예: Ethernet, WLAN).
    - **물리 계층**: 통신 채널을 통한 원시 비트의 전송입니다.

### ISO/OSI 참조 모델

- 인터넷 프로토콜 스택 외에도, 프레젠테이션 및 세션 계층이 제공하는 상위 레벨 서비스를 논의합니다. 여기에는 데이터 교환의 동기화 및 복구를 포함하여 암호화, 압축 같은 기능이 포함됩니다.

### 실제적인 네트워킹 측면

- 캡슐화/디캡슐화, 패킷 전달 및 관련 장치(예: 라우터, 스위치)에 대한 주제도 다룹니다.

이 장은 네트워킹 원리에 대한 철저한 소개를 제공하며, 인터넷과 다양한 네트워크 유형의 구조, 구성 요소 및 기능에 초점을 맞추고 네트워크 프로토콜 및 아키텍처의 이론적 및 실용적 측면을 다룹니다.

# chapter 2

### 1. 네트워크 응용 프로그램의 원리

- **통신 패러다임**:
    - **클라이언트-서버**: 서버는 서비스를 제공하고 항상 켜져 있는 상태로 고정 IP를 가지며, 클라이언트는 필요할 때 서버와 연결되며 서로 직접 소통하지 않습니다.
    - **피어-투-피어 (P2P)**: 고정된 서버가 없고, 피어들(끝 시스템)이 직접 통신하며, 각각 클라이언트와 서버 역할을 합니다.
    - **발행-구독**: 발행자는 메시지를 생성하고 구독자는 메시지를 소비합니다. 브로커는 메시지 배포를 관리합니다.

### 2. 응용 계층 프로토콜

- **HTTP (하이퍼텍스트 전송 프로토콜)**:
    - 웹의 데이터 통신 기반으로, 클라이언트(브라우저)와 서버(웹 서버) 간의 요청/응답 모델을 사용합니다.
- **FTP (파일 전송 프로토콜)**:
    - 클라이언트와 서버 간에 파일을 전송하는 데 사용되며, 명령을 위한 제어 연결과 파일 전송을 위한 데이터 연결을 사용합니다.
- **SMTP/POP3/IMAP (단순 메일 전송 프로토콜, 우편 규약 버전 3, 인터넷 메시지 접근 프로토콜)**:
    - SMTP는 이메일을 보내는 데 사용되며, POP3는 이메일을 서버에서 받아 클라이언트로 다운로드 후 서버에서 삭제하는 데 사용됩니다. IMAP은 이메일의 상태를 유지하며 다중 클라이언트 장치에서 이메일을 관리할 수 있습니다.
- **DNS (도메인 이름 시스템)**:
    - 사람 친화적인 도메인 이름을 IP 주소로 변환하며, 인터넷 탐색에 필수적입니다.
- **P2P 프로토콜**:
    - 파일 공유(예: 비트토렌트) 및 통신(예: 스카이프)과 같은 분산 서비스를 지원합니다.

### 3. 네트워크 프로그래밍 인터페이스: 소켓

- **소켓 프로그래밍**:
    - 소켓은 네트워크를 통해 데이터를 송수신하기 위한 엔드포인트로서 기능합니다. 프로그램은 소켓 API를 사용하여 소켓을 생성하고 관리합니다.
- **TCP 및 UDP 소켓**:
    - TCP는 신뢰할 수 있는 연결형 서비스를 제공하는 반면, UDP는 내장된 신뢰성 없이 비연결형 통신을 제공합니다.

### 4. 웹 기술: HTTP 상세 탐구

- **HTTP 작동 방식**:
    - HTTP는 웹 페이지에 접근할 때 사용되며, 브라우저가 페이지를 요청하고 서버가 데이터로 응답합니다.
    - **비영속 HTTP**: 각 웹 객체마다 새로운 연결을 열어야 하므로, 완전한 웹페이지를 로드하기 위해 여러 RTT(Round-Trip Time)가 필요합니다.
    - **영속 HTTP**: 연결을 재사용하여 여러 객체를 다운로드할 수 있어 필요한 전체 RTT 수를 줄입니다.
- **HTTPS (HTTP Secure)**:
    - HTTP의 확장으로, SSL/TLS를 사용하여 클라이언트와 서버 간에 전송되는 데이터를 암호화하여 안전한 통신을 보장합니다.

### 5. 이메일 기술: SMTP, POP3, IMAP

- **SMTP (단순 메일 전송 프로토콜)**:
    - 메일 서버 간 이메일 전송을 관리합니다. SMTP 상호작용은 명령/응답 구조를 따르며 명령에는 ASCII가 사용됩니다.
- **POP3 및 IMAP**:
    - POP3는 서버에서 이메일을 다운로드하여 클라이언트로 전송한 후 서버에서 삭제하는 데 사용됩니다. IMAP은 이메일을 서버에 저장하고 여러 클라이언트 장치에서 관리할 수 있는 더 복잡한 관리 기능을 제공합니다.

### 6. 도메인 이름 시스템 (DNS)

- **DNS 아키텍처**:
    - 루트 서버, 최상위 도메인(TLD) 서버, 권한 있는 서버를 포함하는 분산 및 계층적 구조입니다.
- **DNS 작동 방식**:
    - 도메인 이름을 IP 주소로 해석, DNS 쿼리 시간을 줄이는 캐싱 메커니즘, DNS 확장성을 처리하는 기술을 포함합니다.

### 7. 파일 전송 및 배포 프로토콜

- **FTP (파일 전송 프로토콜)**:
    - 파일 작업을 위한 명령과 실제 파일 전송을 위해 별도의 제어 및 데이터 연결을 사용하는 FTP 작업을 설명합니다.
- **P2P 파일 배포(예: 비트토렌트)**:
    - 피어 간 효율적인 파일 공유를 위해 tit-for-tat과 같은 메커니즘을 설명합니다. 이는 다운로드와 업로드 비율을 효과적으로 관리하는 데 도움을 줍니다.

### 8. 응용 프로그램별 이슈 및 기술

- **웹 캐싱**:
    - 이전에 접근한 웹 콘텐츠를 저장하기 위해 프록시 서버를 사용하며, 접근 시간과 네트워크 비용을 상당히 줄입니다.
- **쿠키 및 상태 관리**:
    - 쿠키가 상태(사용자 세션 또는 환경 설정 같은)를 관리하는 방법을 설명하며, 상태 없는 HTTP 트랜잭션 간에 상태를 유지하는 데 도움을 줍니다.

이 장은 응용 계층의 기능과 프로토콜이 어떻게 작동하고 상호작용하며 다양한 네트워크 응용 프로그램을 지원하는지에 대한 기본적이고 고급 개념을 설명하여 네트워크 기반 응용 프로그램의 이해와 설계에 필요한 내용을 제공합니다.
# chapter 3 : Transport Layer

- 전송 계층의 원리
- TCP(전송제어 프로토콜)
- UDP(사용자 데이터그램 프로토콜)

### 1. 전송 계층의 원리

- **목적**: 다른 호스트에서 실행 중인 응용 프로그램 프로세스 간에 논리적 통신을 용이하게 합니다.
- **관련 프로토콜**: TCP(전송 제어 프로토콜)와 UDP(사용자 데이터그램 프로토콜).

### 2. 전송 계층 서비스

- **다중화 및 역다중화**:
    - 다양한 응용 프로그램에서 발생하는 여러 데이터 스트림을 처리합니다.
    - 소스 및 대상 IP 주소와 포트 번호를 사용하여 세그먼트를 올바른 수신 응용 프로그램에 직접 전달합니다.
    - OSI 5계층에서 내려갈 때 Multiplexing, 올라갈 때 Demultiplexing
    - 서버가 web과 ssh를 모두 지원한다고 하자 하지만 network layer에서는 ip만 보기 때문에 application의 어디로 갈지를 transport가 결정한다.
    - 메시지를 반환할때 transport layer는 header을 data앞에다 붙여준다. (multiplexing)
	    - 나중에 받는 쪽에서 demultiplexing을 하기 위함
	    - 그럼 network layer에서는 ip주소만 보고 다시 보내준다.

- **신뢰할 수 있는 데이터 전송**:
    - 데이터의 완전하고 정확한 전송을 보장합니다.
    - ACK(확인 응답) 및 NAK(부정 응답)을 사용하여 오류를 검출하고 수정하는 메커니즘을 사용합니다.
- **흐름 제어**:
    - 수신자가 압도당하지 않도록 데이터 전송률을 관리합니다.
- **혼잡 제어**:
    - 네트워크 용량을 기반으로 패킷 전송률을 조정하여 혼잡을 방지합니다.

### 3. UDP (사용자 데이터그램 프로토콜)

- **특징**:
    - 연결 없는 프로토콜로, 송신자와 수신자 간에 핸드셰이킹이 없습니다.
	    - handshaking : 데이터 전송을 시작하기 전에 상대방과의 연결을 상호 확인하는 과정
    - 메시지 전달을 보장하지 않는 "최선" 서비스를 제공합니다.
    - TCP보다 오버헤드가 적습니다.
	    - UDP의 헤더크기가 작기 때문에 프로토콜 오버헤드가 낮다.
- **사용 사례**:
    - 신뢰성보다 속도가 중요한 스트리밍 멀티미디어 응용 프로그램.
    - DNS(도메인 이름 시스템) 및 SNMP(단순 네트워크 관리 프로토콜) 같은 프로토콜.

### 4. TCP (전송 제어 프로토콜)

- **특징**:
    - 연결 지향적이며, 데이터 전송 전에 연결 설정 단계가 필요합니다.
    - 바이트 스트림의 신뢰할 수 있고 순서대로 에러가 검사된 전달을 제공합니다.
    - 혼잡 제어 메커니즘을 포함합니다.
- **신뢰성 메커니즘**:
    - 패킷이 신뢰성 있고 순서대로 전달되도록 시퀀스 번호, 확인 응답(ACK), 타이머를 사용합니다.

### 5. 신뢰할 수 있는 데이터 전송 프로토콜 (RDT)
- rdt : 신뢰할 수 있는 데이터 전송 프로토콜 (전송된 데이터가 에러없이, 순서대로, 손실 없이 목적지에 도달하도록 보장) (Application layer)
	- 오류검출 : checksum, 기타 오류 검출 코드
	- 확인응답 (ACK) : 데이터가 성공적으로 수신 되었음을 송신자에게 알리기 위해 사용
	- 재전송 : ACK이 예상시간 내에 수신되지 않거나 패킷이 손상된 경우, 데이터를 재전송한다.
	- 순서번호 (Sequence Numbers) : 패킷의 순서를 유지하고, 중복이나 잘못된 순서의 패킷을 처리
	- 타이머 (Timers) : 예상 응답을 기다리는 시간을 관리, 응답이 없을 경우 재전송을 트리거한다.
	- TCP는 이러한 rdt의 모든 특성을 구현한 예이다.
- udt : 데이터의 신뢰성을 보장하지 않는 데이터 전송 프로토콜 (Transport Layer)
	- 오류검출 없음 : 손상된 패킷을 복구하거나 재전송하지 않는다.
	- 비확인 응답 : 데이터 수신을 확인하기 위한 매커니즘을 제공하지 않는다.
	- 순서보장없음 : 데이터 패킷이 전송된 순서대로 도착한다는 보장이 없다.
- FSM : 시스템의 동작을 설명하는 방식 중 하나, state와 event, action으로 설명하는 것 ( 송신자, 수신자가 동작하는 방법을 FSM으로 설계 )
	- state : 예를들어 sender의 FSM이라면 sender가 가질 수 있는 여러가지 state중 하나에 있게 되고 어떤 상황이 발생함에 따라서 다른 상태로 넘어갈 수 있는 state를 정의한다.
	- event causing state transition : event 발생  
	- actions taken on state transition : action을 수행하고 state2로 이동

- **RDT1.0**: 완벽한 기본 채널을 가정하며 오류가 없습니다, 가장 간단하게 신뢰하지 않는 rdt
- **RDT2.0**: ACK 및 NAK를 사용하여 오류 처리 기능을 도입하지만 패킷 손실은 고려하지 않습니다, error를 찾으면 데이터를 버리고 전체 재전송 (에러 체크만 가능, 에러 정정 못함 그래서 데이터를 버림)
- **RDT2.1/RDT2.2**: ACK/NAK 메시지가 손상될 수 있는 경우를 처리합니다.
	- RDT2.1 : sender, handles garbled ACK/NAKs
		- sequence number를 패킷에 추가했다.
		- stop and wait하기 때문에 sequence number는 2개만 쓴다. 
	- RDT2.2 : a NAK-free protocol
		- ACK만 쓰는 형태로 프로토콜을 바꾸어본다. NAK을 보낼 상황에도 ACK를 보내는 것이다.
		- 구분을 하기 위해서 ACK에 sequence number을 추가해준다.
- **RDT3.0**: 패킷이 손상되거나 손실될 수 있는 환경을 다룹니다. 손실된 패킷을 재전송하기 위해 타임아웃 메커니즘을 구현합니다.

### 6. 고급 전송 메커니즘

- **파이프라인 프로토콜**:
    - **Go-Back-N (GBN)**:
        - 확인 응답을 필요로 하기 전에 여러 패킷을 전송할 수 있습니다.
        - 슬라이딩 윈도우와 누적 ACK를 사용합니다.
        - 손실된 패킷 이후의 모든 패킷을 재전송해야 하므로 누적 ACK 시스템에서 더 효율적입니다.
    - **Selective Repeat**:
        - 각 패킷에 대해 개별적으로 확인을 합니다.
        - 오류가 있는 패킷만 재전송하므로 패킷 오류율이 높은 시나리오에서 Go-Back-N보다 더 효율적입니다.

### 7. 프로토콜 성능

- **전파 지연 및 전송 속도의 영향**:
    - RDT3.0 같은 간단한 stop-and-wait 방법은 ACK를 기다리는 시간 때문에 고속 연결을 크게 활용하지 못할 수 있습니다.
- **파이프라이닝을 통한 활용도 개선**:
    - 파이프라이닝은 여러 "비행 중" 패킷을 허용함으로써 대기 시간을 줄이고 고속 네트워크에서 처리량을 개선합니다.

이 문서는 컴퓨터 네트워크에서 신뢰할 수 있고 효율적인 데이터 전송을 달성하기 위한 프로토콜의 이론적 측면과 실용적 구현을 철저히 다루며, 특히 전송 계층이 네트워크 계층 서비스를 어떻게 향상시키고 다중화/역다중화, 신뢰할 수 있는 데이터 전송, 흐름 제어 및 혼잡 제어와 같은 필수 기능을 제공하는지에 초점을 맞춥니다.


